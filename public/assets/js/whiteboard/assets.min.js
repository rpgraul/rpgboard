import{canvas}from"./canvas.js";import{setMode}from"./tools.js";export function initializeAssets(){const scrollArea=document.getElementById("wb-scroll-area");document.querySelectorAll(".asset-item").forEach((img=>{img.addEventListener("dragstart",(e=>{e.dataTransfer.setData("imgUrl",img.src)}))})),scrollArea.addEventListener("dragover",(e=>e.preventDefault())),scrollArea.addEventListener("drop",(e=>{e.preventDefault();const imgUrl=e.dataTransfer.getData("imgUrl"),rect=canvas.upperCanvasEl.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY-rect.top;imgUrl&&fabric.Image.fromURL(imgUrl,(img=>{img.set({left:x,top:y,originX:"center",originY:"center"}),img.width>300&&img.scaleToWidth(300),canvas.add(img),canvas.setActiveObject(img),setMode("select")}))})),window.addEventListener("paste",(e=>{const items=(e.clipboardData||e.originalEvent.clipboardData).items;for(let index in items){const item=items[index];if("file"===item.kind&&item.type.includes("image/")){const blob=item.getAsFile(),reader=new FileReader;reader.onload=event=>{fabric.Image.fromURL(event.target.result,(img=>{img.set({left:canvas.width/2,top:canvas.height/2,originX:"center",originY:"center"}),img.width>500&&img.scaleToWidth(500),canvas.add(img),canvas.setActiveObject(img)}))},reader.readAsDataURL(blob)}}}))}