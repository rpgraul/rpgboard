import{renderHeader}from"./components/header.js";import{renderOverlays}from"./components/commonHTML.js";import{renderFab}from"./components/fab.js";export async function initializeLayout(config={}){const{fabActions:fabActions=[]}=config;console.log("[Layout] Initializing modular layout system..."),console.log(`[Layout] FAB Actions: [${fabActions.join(", ")}]`);const headerContainer=document.getElementById("app-header"),fabContainer=document.getElementById("app-fab");if(!headerContainer)throw console.error("[Layout] Missing required element: #app-header"),new Error("Layout initialization failed: #app-header not found in DOM");!fabContainer&&fabActions.length>0&&console.warn("[Layout] #app-fab not found, will be created by renderFab()"),console.log("[Layout] Step 1: Rendering overlays...");const overlaysContainer=renderOverlays();if(!overlaysContainer)throw console.error("[Layout] Failed to render overlays"),new Error("Layout initialization failed: renderOverlays() returned null");console.log("[Layout] Step 2: Rendering header...");const headerElement=renderHeader();if(!headerElement)throw console.error("[Layout] Failed to render header"),new Error("Layout initialization failed: renderHeader() returned null");console.log("[Layout] Step 3: Rendering FAB...");const fabElement=renderFab(fabActions);if(!fabElement)throw console.error("[Layout] Failed to render FAB"),new Error("Layout initialization failed: renderFab() returned null");await new Promise((resolve=>setTimeout(resolve,0))),console.log("[Layout] Step 4: Gathering element references...");const layoutReferences={header:headerElement,fab:fabElement,overlays:overlaysContainer,chatSidebar:document.getElementById("chat-sidebar"),chatInputArea:document.getElementById("chat-input-area"),chatInput:document.getElementById("chat-input"),chatMessages:document.getElementById("chat-messages"),toggleChatBtn:document.getElementById("toggle-chat-btn"),closeChatBtn:document.getElementById("close-chat-btn"),helpModal:document.getElementById("help-modal"),fabHelp:document.getElementById("fab-help"),userLoginBtn:document.getElementById("user-login-btn"),userNameTag:document.getElementById("user-name"),userArea:document.getElementById("user-area"),userLoginModal:document.getElementById("user-login-modal"),narratorLoginBtn:document.getElementById("narrator-login-btn"),narratorModal:document.getElementById("narrator-modal"),diceContainer:document.getElementById("dice-container"),diceMainBtn:document.getElementById("dice-main-btn"),diceFabWrapper:document.getElementById("dice-fab-wrapper")},missingElements=["chatSidebar","chatInput","helpModal","userLoginBtn","narratorLoginBtn"].filter((key=>!layoutReferences[key]));return missingElements.length>0&&console.warn(`[Layout] Missing optional elements: ${missingElements.join(", ")}`),console.log("[Layout] Layout initialization complete!"),console.log("[Layout] Available references:",Object.keys(layoutReferences)),layoutReferences}if(!document.getElementById("header-menu-css")){const link=document.createElement("link");link.rel="stylesheet",link.href="assets/css/header-menu.css",link.id="header-menu-css",document.head.appendChild(link)}export default{initializeLayout:initializeLayout};